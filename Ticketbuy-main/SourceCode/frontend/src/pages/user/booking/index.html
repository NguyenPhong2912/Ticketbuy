<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
<meta http-equiv="Pragma" content="no-cache" />
<meta http-equiv="Expires" content="0" />
<title>GreenBus - ƒê·∫∑t v√© xe tr·ª±c tuy·∫øn</title>
<link rel="stylesheet" href="booking.css?v=3.0" />
</head>
<body>
<header class="site-header">
  <div class="container header-inner">
    <div class="logo">
      <img src="../../../assets/images/logo1.png" data-asset-src="images/logo1.png" alt="GreenBus logo">
      <span class="brand">GreenBus</span>
    </div>
    <nav class="main-nav">
      <a href="../home page/index.html">Trang ch·ªß</a>
      <a href="../routes/index.html">Tuy·∫øn ph·ªï bi·∫øn</a>
      <a href="../about/index.html">V·ªÅ ch√∫ng t√¥i</a>
      <div class="user-nav" id="userNav">
        <button class="user-toggle hidden" id="userMenuToggle" type="button">
          <span class="user-name" id="userMenuName">T√†i kho·∫£n</span>
          <span class="user-role" id="userMenuRole"></span>
          <svg width="14" height="14" viewBox="0 0 24 24" aria-hidden="true">
            <path fill="currentColor" d="M7 10l5 5 5-5z"/>
          </svg>
        </button>
        <div class="user-dropdown hidden" id="userDropdown">
          <div class="user-info">
            <p id="userDropdownName">GreenBus</p>
            <small id="userDropdownEmail"></small>
          </div>
          <a href="../account/index.html">H·ªì s∆° & V√©</a>
          <button type="button" id="logoutBtn">ƒêƒÉng xu·∫•t</button>
        </div>
        <a href="../../auth/login.html" class="btn-login" id="navAuthLink">ƒêƒÉng nh·∫≠p / ƒêƒÉng k√Ω</a>
      </div>
    </nav>
  </div>
</header>

<main class="booking-shell" data-asset-bg="images/H√åNH BANNER XE BUS.png">
  <section class="card booking-form">
    <div class="card-header">
      <div>
        <p class="eyebrow">ƒê·∫∑t v√©</p>
        <h1>Ch·ªçn ng√†y kh·ªüi h√†nh</h1>
        <p class="form-subtitle">H·ªá th·ªëng s·∫Ω t·ª± ƒë·ªông hi·ªÉn th·ªã c√°c chuy·∫øn c√≥ s·∫µn</p>
      </div>
    </div>
    <div class="booking-form-simple">
      <div class="route-picker-wrapper">
        <label class="route-label">
          <span class="label-icon">üìç</span>
          <span class="label-text">ƒêi·ªÉm ƒëi</span>
        </label>
        <input id="fromLocation" type="text" class="route-input" placeholder="Ch·ªçn ƒëi·ªÉm ƒëi">
      </div>
      <div class="route-picker-wrapper">
        <label class="route-label">
          <span class="label-icon">üéØ</span>
          <span class="label-text">ƒêi·ªÉm ƒë·∫øn</span>
        </label>
        <input id="toLocation" type="text" class="route-input" placeholder="Ch·ªçn ƒëi·ªÉm ƒë·∫øn">
      </div>
      <div class="date-picker-wrapper">
        <label class="date-label">
          <span class="label-icon">üìÖ</span>
          <span class="label-text">Ng√†y kh·ªüi h√†nh</span>
        </label>
        <input id="date" type="date" class="date-input-large" required>
      </div>
      <div class="seats-picker-wrapper">
        <label class="seats-label">
          <span class="label-icon">üë•</span>
          <span class="label-text">S·ªë v√©</span>
        </label>
        <div class="seats-input-group">
          <button type="button" class="seats-btn" id="decreaseSeats">‚àí</button>
          <input id="seats" type="number" min="1" value="1" class="seats-input" required>
          <button type="button" class="seats-btn" id="increaseSeats">+</button>
        </div>
      </div>
      <div class="form-actions-wrapper">
        <button type="button" class="btn-primary btn-search" id="searchTripsBtn">
          <span>üîç</span>
          <span>T√¨m ki·∫øm chuy·∫øn</span>
        </button>
      </div>
    </div>
  </section>

  <section class="card results-card" id="resultsCard">
    <div class="card-header">
      <div>
        <p class="eyebrow">K·∫øt qu·∫£ t√¨m ki·∫øm</p>
        <h2 id="resultsTitle">Ch·ªçn ng√†y ƒë·ªÉ xem chuy·∫øn</h2>
      </div>
      <div class="legend" id="resultsLegend" style="display: none;">
        <span class="pill">Nh·∫•n "Ch·ªçn gh·∫ø" ƒë·ªÉ ƒë·∫∑t nhanh</span>
      </div>
    </div>
    <div id="searchResults" class="results-grid" aria-live="polite">
      <div class="empty-state">
        <div class="empty-icon">üöå</div>
        <p class="empty-text">Vui l√≤ng ch·ªçn ng√†y kh·ªüi h√†nh ƒë·ªÉ xem c√°c chuy·∫øn c√≥ s·∫µn</p>
      </div>
    </div>
  </section>

</main>

<section id="seatModal" class="modal hidden" role="dialog" aria-modal="true">
  <div class="modal-inner">
    <div class="modal-header">
      <div>
        <p class="eyebrow">Ch·ªçn gh·∫ø v√† ng√†y</p>
        <h3 id="selectedRouteName">‚Äî</h3>
        <p class="muted" id="selectedRouteMeta">Vui l√≤ng ch·ªçn ng√†y v√† √≠t nh·∫•t m·ªôt gh·∫ø.</p>
      </div>
      <button class="ghost-btn" id="closeSeatModal" type="button">ƒê√≥ng</button>
    </div>
    <div class="date-selection">
      <label>
        <span>Ng√†y kh·ªüi h√†nh</span>
        <input type="date" id="modalDepartureDate" required min="">
      </label>
      <div id="tripAvailability" class="trip-availability"></div>
    </div>
    <div class="seat-legend">
      <span><span class="dot available"></span> Gh·∫ø tr·ªëng</span>
      <span><span class="dot selected"></span> ƒêang ch·ªçn</span>
      <span><span class="dot taken"></span> ƒê√£ gi·ªØ</span>
    </div>
    <div id="seatMap" class="seat-map"></div>
    <div class="seat-actions">
      <button id="cancelSeat" class="ghost-btn" type="button">Hu·ª∑</button>
      <button id="confirmSeat" class="btn-primary" type="button" disabled>Ti·∫øp t·ª•c thanh to√°n</button>
    </div>
  </div>
</section>


<section id="paymentModal" class="modal hidden" role="dialog" aria-modal="true">
  <div class="modal-inner payment-modal">
    <div class="modal-header">
      <div>
        <p class="eyebrow">Thanh to√°n</p>
        <h3 id="paymentRouteName">‚Äî</h3>
        <p class="muted" id="paymentSummary">‚Äî</p>
      </div>
      <button class="ghost-btn" id="closePaymentModal" type="button">ƒê√≥ng</button>
    </div>
    <div class="payment-methods">
      <div class="payment-tabs">
        <button class="payment-tab active" data-method="card">Th·∫ª Visa/Mastercard/JCB</button>
        <button class="payment-tab" data-method="vietqr">VietQR</button>
        <button class="payment-tab" data-method="momo">MoMo</button>
      </div>
      
      <div class="payment-content">
        <!-- Card Payment -->
        <div id="paymentCard" class="payment-panel active">
          <form id="cardPaymentForm">
            <div class="form-group">
              <label>S·ªë th·∫ª</label>
              <input type="text" placeholder="1234 5678 9012 3456" maxlength="19" id="cardNumber" required>
            </div>
            <div class="form-row">
              <div class="form-group">
                <label>Ng√†y h·∫øt h·∫°n</label>
                <input type="text" placeholder="MM/YY" maxlength="5" id="cardExpiry" required>
              </div>
              <div class="form-group">
                <label>CVV</label>
                <input type="text" placeholder="123" maxlength="3" id="cardCVV" required>
              </div>
            </div>
            <div class="form-group">
              <label>T√™n ch·ªß th·∫ª</label>
              <input type="text" placeholder="NGUYEN VAN A" id="cardName" required>
            </div>
            <div class="payment-note">
              <small>üí≥ ƒê√¢y l√† m·∫´u demo, kh√¥ng th·ª±c hi·ªán thanh to√°n th·∫≠t</small>
            </div>
          </form>
        </div>

        <!-- VietQR Payment -->
        <div id="paymentVietQR" class="payment-panel">
          <div class="qr-payment">
            <div class="qr-code-placeholder">
              <svg width="200" height="200" viewBox="0 0 200 200" fill="none">
                <rect width="200" height="200" fill="#f0f0f0"/>
                <rect x="20" y="20" width="40" height="40" fill="#000"/>
                <rect x="140" y="20" width="40" height="40" fill="#000"/>
                <rect x="20" y="140" width="40" height="40" fill="#000"/>
                <rect x="60" y="60" width="20" height="20" fill="#000"/>
                <rect x="120" y="60" width="20" height="20" fill="#000"/>
                <rect x="60" y="120" width="20" height="20" fill="#000"/>
                <rect x="100" y="100" width="20" height="20" fill="#000"/>
                <text x="100" y="190" text-anchor="middle" font-size="12" fill="#666">VietQR Demo</text>
              </svg>
            </div>
            <p class="qr-amount">S·ªë ti·ªÅn: <strong id="vietqrAmount">0‚Ç´</strong></p>
            <p class="qr-instruction">Qu√©t m√£ QR b·∫±ng ·ª©ng d·ª•ng ng√¢n h√†ng ƒë·ªÉ thanh to√°n</p>
            <div class="payment-note">
              <small>üì± ƒê√¢y l√† m·∫´u demo, kh√¥ng th·ª±c hi·ªán thanh to√°n th·∫≠t</small>
            </div>
            <button type="button" class="btn-confirm-payment-inline" id="confirmVietQRPayment">
              X√°c nh·∫≠n ho√†n th√†nh thanh to√°n
            </button>
          </div>
        </div>

        <!-- MoMo Payment -->
        <div id="paymentMoMo" class="payment-panel">
          <div class="momo-payment">
            <div class="momo-logo">MoMo</div>
            <div class="form-group">
              <label>S·ªë ƒëi·ªán tho·∫°i MoMo</label>
              <input type="tel" placeholder="0901234567" id="momoPhone" required>
            </div>
            <div class="form-group">
              <label>M√£ OTP (demo: 123456)</label>
              <input type="text" placeholder="Nh·∫≠p m√£ OTP" maxlength="6" id="momoOTP" required>
            </div>
            <div class="payment-note">
              <small>üí≥ ƒê√¢y l√† m·∫´u demo, kh√¥ng th·ª±c hi·ªán thanh to√°n th·∫≠t</small>
            </div>
            <button type="button" class="btn-confirm-payment-inline" id="confirmMoMoPayment">
              X√°c nh·∫≠n ho√†n th√†nh thanh to√°n
            </button>
          </div>
        </div>
      </div>
    </div>
    <div class="payment-actions">
      <button id="backToSeat" class="ghost-btn" type="button">Quay l·∫°i</button>
      <button id="confirmPayment" class="btn-primary" type="button">X√°c nh·∫≠n thanh to√°n</button>
    </div>
  </div>
</section>

<div class="toast-stack" id="toastStack" aria-live="polite" aria-atomic="true"></div>

<script src="../../../helpers/assets.js"></script>
<script src="../../../helpers/api.js"></script>
<script src="booking.js?v=3.4"></script>
</body>
</html>
